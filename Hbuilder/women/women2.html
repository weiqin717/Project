<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<title>富女节</title>
		<script type="text/javascript">
			var iScale = 1;
			iScale = iScale / window.devicePixelRatio;
			document.write('<meta name="viewport" content="width=device-width,initial-scale=' + iScale + ',minimum-scale=' + iScale + ',maximum-scale=' + iScale + '" />')
		</script>
		<script type="text/javascript">
			document.getElementsByTagName("html")[0].style.fontSize = document.documentElement.clientWidth / 16 + 'px';
		</script>
		<link rel="stylesheet" type="text/css" href="css/women2.css" />
	</head>

	<body>
		<script>
			document.body.style.height = document.documentElement.clientHeight + "px";
		</script>
		<section class="bg" style="display:">
			<div class="border">
				<div class="pic">
					<form enctype="multipart/form-data" name="form1">
						<input id="f" type="file" name="f" onchange="change()" />
						<div class="upload">上传图片</div>
						<p>预览:</p>
						<p>
							<img id="" alt="" name="pic" />
						</p>
					</form>
					<img src="img/four_1.gif" alt="" / class="p_one">
					<a href="javascript:;" class="p_pic"><img src="img/four_2.gif" alt="" id="preview" /></a>
					<textarea type="text" name="name" value="" placeholder="输入文字..." class="word"></textarea>
				</div>
			</div>
			<a href="javascript:;" class="end">完成</a>
		</section>
		<section class="bg bg1" style="display: none;">
			<div class="border_1">
				<div class="pic_1">
					<img src="img/four_3.gif" alt="" / class="p_one_1">
					<p class="word_1">生菜网</p>
				</div>
			</div>
			<a href="javascript:;" class="fx">
				<img src="img/fx.gif" alt="" />
			</a>
			<p class="zan">
				获得10个赞，即可获得10颗菜籽
				<br/> 获得20个赞，即可获得20颗菜籽
				<br/> ......
				<br/> 获得50个赞，即可获得50颗菜籽
				<br/> 菜籽可用来兑换加息券，最高可获得5%加息卷
			</p>
		</section>
	</body>
	<script type="text/javascript">
		function change() {
			var pic = document.getElementById("preview"),
				file = document.getElementById("f");
			var ext = file.value.substring(file.value.lastIndexOf(".") + 1).toLowerCase();
			// gif在IE浏览器暂时无法显示
			if (ext != 'png' && ext != 'jpg' && ext != 'jpeg') {
				alert("图片的格式必须为png或者jpg或者jpeg格式！");
				return;
			}
			var isIE = navigator.userAgent.match(/MSIE/) != null,
				isIE6 = navigator.userAgent.match(/MSIE 6.0/) != null;
			if (isIE) {
				file.select();
				var reallocalpath = document.selection.createRange().text;
				// IE6浏览器设置img的src为本地路径可以直接显示图片
				if (isIE6) {
					pic.src = reallocalpath;
				} else {
					// 非IE6版本的IE由于安全问题直接设置img的src无法显示本地图片，但是可以通过滤镜来实现
					pic.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod='image',src=\"" + reallocalpath + "\")";
					// 设置img的src为base64编码的透明图片 取消显示浏览器默认图片
					pic.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';
				}
			} else {
				html5Reader(file);
			}
		}

		function html5Reader(file) {
			var file = file.files[0];
			var reader = new FileReader();
			reader.readAsDataURL(file);
			reader.onload = function(e) {
				var pic = document.getElementById("preview");
				pic.src = this.result;
			}
		}
	</script>

</html>